{
    "app_name": "MySparkStreamingApp",
    "batchInterval": 5,
    "application_config": {
        "spark.master":"local[2]",
        "spark.app.name":"MySparkStreamingApp",
        "spark.streaming.interval":500,
        "spark.streaming.stopGracefullyOnShutdown":true
    },
    "source": {
        "type": "kafka",
        "read_config": {
            "bootstrap_servers": "localhost:9092",
            "input_topic": "test",
            "group_id": "MySparkStreamingApp",
            "key_deserializer": "org.apache.kafka.common.serialization.StringDeserializer",
            "value_deserializer": "org.apache.kafka.common.serialization.StringDeserializer"
        }
    },
    "queries":[
        {
            "table_name": "t1",
            "query": "select * from t1"
        },
        {
            "table_name": "t2",
            "query": "select country, id from t2 limit 10"
        },
        {
            "table_name": "t3",
            "query": "select country, count(1) as n from t2 group by country order by n desc"
        } 
    ],
    "transformations": [
        {
            "type": "filter",
            "params": {
                "column": "number",
                "condition": "> 10"
            }
        },
        {
            "type": "select",
            "params": {
                "columns": [
                    "id",
                    "name",
                    "country",
                    "job",
                    "timestamp",
                    "number"
                ]
            }
        },
        {
            "type": "withColumn",
            "params": {
                "column": "number_new",
                "expression": "number * 0.15"
            }
        },
        {
            "type": "drop",
            "params": {
                "columns": [
                    "job"
                ]
            }
        },
        {
            "type": "limit",
            "params": {
                "num": 100
            }
        }
    ],
    "sink": {
        "sink_type": "console",
        "sink_config":{
            "mode": "complete",
            "bootstrap_servers": "localhost:9092",
            "sink_topic": "testout"
        }
    }
}